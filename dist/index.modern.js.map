{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { CSSProperties, useLayoutEffect, useRef, useState } from 'react'\nimport moment from 'moment'\n\ninterface IBaseProps {\n  showSeconds?: 'never' | 'always' | 'onlyIfIsNotZero' | 'ifOnStartisNotZero'\n  showMinutes?: 'never' | 'always' | 'onlyIfIsNotZero' | 'ifOnStartisNotZero'\n  showHours?: 'never' | 'always' | 'onlyIfIsNotZero' | 'ifOnStartisNotZero'\n  showDays?: 'never' | 'always' | 'onlyIfIsNotZero' | 'ifOnStartisNotZero'\n  secondsText?: string\n  minutesText?: string\n  hoursText?: string\n  daysText?: string\n  seperatorChar?: string\n  pluralSymbol?: string\n  className?: string,\n  style?: CSSProperties\n  onFinish?: () => void\n}\n\nexport interface TimerProps extends IBaseProps {}\n\nexport interface StopWatchProps extends IBaseProps {\n  end?: Date | string\n  onEachSecond?: (\n    secondsPassed: number,\n    minutesPassed: number,\n    hoursPassed: number,\n    daysPassed: number\n  ) => void\n}\n\nexport function Timer({ className }: TimerProps) {\n  return <div className={className}>Example Component: </div>\n}\n\nexport function StopWatch({\n  className,\n  style,\n  seperatorChar = ',',\n  showSeconds = 'always',\n  showMinutes = 'always',\n  showHours = 'always',\n  showDays = 'always',\n  daysText = 'Day',\n  hoursText = 'Hour',\n  minutesText = 'Minute',\n  secondsText = 'Second',\n  pluralSymbol = 's',\n  onEachSecond,\n  onFinish,\n  end\n}: StopWatchProps) {\n  const [second, setSecond] = useState<number>(0)\n  const [minute, setMinute] = useState<number>(0)\n  const [hour, setHour] = useState<number>(0)\n  const [day, setDay] = useState<number>(0)\n  const [finished, setFinished] = useState<boolean>(false)\n\n  const holderRef = useRef<HTMLSpanElement>(null)\n\n  const timeout = 1000\n  useLayoutEffect(() => {\n    var endTime = moment(end)\n    var interval = setInterval(() => {\n      if (end) {\n        var now = moment(new Date())\n        if (now.isBefore(endTime)) {\n          clearInterval(interval)\n          setFinished(true)\n          if (onFinish) onFinish()\n        }\n      }\n\n      if (!finished) {\n        if (second == 59) {\n          setSecond(0)\n          if (minute == 59) {\n            setMinute(0)\n            if (hour == 23) {\n              setDay((state) => ++state)\n              setHour(0)\n            } else setMinute((state) => ++state)\n          } else setMinute((state) => ++state)\n        } else setSecond((state) => ++state)\n\n        if (onEachSecond) onEachSecond(second, minute, hour, day)\n      }\n    }, timeout)\n\n    return () => {\n      clearInterval(interval)\n    }\n  })\n\n  const isPlural = (status: number) => (status >= 2 ? pluralSymbol : '')\n\n  const dayInfo = () => {\n    switch (showDays) {\n      case 'always':\n        return `${day} ${daysText}${isPlural(day)}`\n      case 'onlyIfIsNotZero':\n        return day ? `${day} ${daysText}${isPlural(day)}` : ''\n      case 'ifOnStartisNotZero':\n        return `${day} ${daysText}${isPlural(day)}`\n      default:\n        return ''\n    }\n  }\n\n  const hourInfo = () => {\n    switch (showHours) {\n      case 'always':\n        return `${hour} ${hoursText}${isPlural(hour)}`\n      case 'onlyIfIsNotZero':\n        return day ? `${hour} ${hoursText}${isPlural(hour)}` : ''\n      case 'ifOnStartisNotZero':\n        return `${hour} ${hoursText}${isPlural(hour)}`\n      default:\n        return ''\n    }\n  }\n\n  const minuteInfo = () => {\n    switch (showMinutes) {\n      case 'always':\n        return `${minute} ${minutesText}${isPlural(minute)}`\n      case 'onlyIfIsNotZero':\n        return day ? `${minute} ${minutesText}${isPlural(minute)}` : ''\n      case 'ifOnStartisNotZero':\n        return `${minute} ${minutesText}${isPlural(minute)}`\n      default:\n        return ''\n    }\n  }\n\n  const secondInfo = () => {\n    switch (showSeconds) {\n      case 'always':\n        return `${second} ${secondsText}${isPlural(second)}`\n      case 'onlyIfIsNotZero':\n        return day ? `${second} ${secondsText}${isPlural(second)}` : ''\n      case 'ifOnStartisNotZero':\n        return `${second} ${secondsText}${isPlural(second)}`\n      default:\n        return ''\n    }\n  }\n\n  var text = `${dayInfo()}${seperatorChar} ${hourInfo()}${seperatorChar} ${minuteInfo()}${seperatorChar} ${secondInfo()}`\n\n  return (\n    <span ref={holderRef} className={className } style={style}>\n      {text}\n    </span>\n  )\n}\n"],"names":["Timer","className","React","StopWatch","style","seperatorChar","showSeconds","showMinutes","showHours","showDays","daysText","hoursText","minutesText","secondsText","pluralSymbol","onEachSecond","onFinish","end","second","setSecond","useState","minute","setMinute","hour","setHour","day","setDay","finished","setFinished","holderRef","useRef","timeout","useLayoutEffect","endTime","moment","interval","setInterval","now","Date","isBefore","clearInterval","state","isPlural","status","dayInfo","hourInfo","minuteInfo","secondInfo","text","ref"],"mappings":"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"}