{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { CSSProperties, useLayoutEffect, useRef, useState } from 'react'\nimport moment from 'moment'\n\ninterface IBaseProps {\n  showSeconds?: 'never' | 'always' | 'onlyIfIsNotZero' | 'ifOnStartisNotZero'\n  showMinutes?: 'never' | 'always' | 'onlyIfIsNotZero' | 'ifOnStartisNotZero'\n  showHours?: 'never' | 'always' | 'onlyIfIsNotZero' | 'ifOnStartisNotZero'\n  showDays?: 'never' | 'always' | 'onlyIfIsNotZero' | 'ifOnStartisNotZero'\n  secondsText?: string\n  minutesText?: string\n  hoursText?: string\n  daysText?: string\n  seperatorChar?: string\n  pluralSymbol?: string\n  className?: string,\n  style?: CSSProperties\n  onFinish?: () => void\n}\n\nexport interface TimerProps extends IBaseProps {}\n\nexport interface StopWatchProps extends IBaseProps {\n  end?: Date | string\n  onEachSecond?: (\n    secondsPassed: number,\n    minutesPassed: number,\n    hoursPassed: number,\n    daysPassed: number\n  ) => void\n}\n\nexport function Timer({ className }: TimerProps) {\n  return <div className={className}>Example Component: </div>\n}\n\nexport function StopWatch({\n  className,\n  style,\n  seperatorChar = ',',\n  showSeconds = 'always',\n  showMinutes = 'always',\n  showHours = 'always',\n  showDays = 'always',\n  daysText = 'Day',\n  hoursText = 'Hour',\n  minutesText = 'Minute',\n  secondsText = 'Second',\n  pluralSymbol = 's',\n  onEachSecond,\n  onFinish,\n  end\n}: StopWatchProps) {\n  const [second, setSecond] = useState<number>(0)\n  const [minute, setMinute] = useState<number>(0)\n  const [hour, setHour] = useState<number>(0)\n  const [day, setDay] = useState<number>(0)\n  const [finished, setFinished] = useState<boolean>(false)\n\n  const holderRef = useRef<HTMLSpanElement>(null)\n\n  const timeout = 1000\n  useLayoutEffect(() => {\n    var endTime = moment(end)\n    var interval = setInterval(() => {\n      if (end) {\n        var now = moment(new Date())\n        if (now.isBefore(endTime)) {\n          clearInterval(interval)\n          setFinished(true)\n          if (onFinish) onFinish()\n        }\n      }\n\n      if (!finished) {\n        if (second == 59) {\n          setSecond(0)\n          if (minute == 59) {\n            setMinute(0)\n            if (hour == 23) {\n              setDay((state) => ++state)\n              setHour(0)\n            } else setMinute((state) => ++state)\n          } else setMinute((state) => ++state)\n        } else setSecond((state) => ++state)\n\n        if (onEachSecond) onEachSecond(second, minute, hour, day)\n      }\n    }, timeout)\n\n    return () => {\n      clearInterval(interval)\n    }\n  })\n\n  const isPlural = (status: number) => (status >= 2 ? pluralSymbol : '')\n\n  const dayInfo = () => {\n    switch (showDays) {\n      case 'always':\n        return `${day} ${daysText}${isPlural(day)}`\n      case 'onlyIfIsNotZero':\n        return day ? `${day} ${daysText}${isPlural(day)}` : ''\n      case 'ifOnStartisNotZero':\n        return `${day} ${daysText}${isPlural(day)}`\n      default:\n        return ''\n    }\n  }\n\n  const hourInfo = () => {\n    switch (showHours) {\n      case 'always':\n        return `${hour} ${hoursText}${isPlural(hour)}`\n      case 'onlyIfIsNotZero':\n        return day ? `${hour} ${hoursText}${isPlural(hour)}` : ''\n      case 'ifOnStartisNotZero':\n        return `${hour} ${hoursText}${isPlural(hour)}`\n      default:\n        return ''\n    }\n  }\n\n  const minuteInfo = () => {\n    switch (showMinutes) {\n      case 'always':\n        return `${minute} ${minutesText}${isPlural(minute)}`\n      case 'onlyIfIsNotZero':\n        return day ? `${minute} ${minutesText}${isPlural(minute)}` : ''\n      case 'ifOnStartisNotZero':\n        return `${minute} ${minutesText}${isPlural(minute)}`\n      default:\n        return ''\n    }\n  }\n\n  const secondInfo = () => {\n    switch (showSeconds) {\n      case 'always':\n        return `${second} ${secondsText}${isPlural(second)}`\n      case 'onlyIfIsNotZero':\n        return day ? `${second} ${secondsText}${isPlural(second)}` : ''\n      case 'ifOnStartisNotZero':\n        return `${second} ${secondsText}${isPlural(second)}`\n      default:\n        return ''\n    }\n  }\n\n  var text = `${dayInfo()}${seperatorChar} ${hourInfo()}${seperatorChar} ${minuteInfo()}${seperatorChar} ${secondInfo()}`\n\n  return (\n    <span ref={holderRef} className={className } style={style}>\n      {text}\n    </span>\n  )\n}\n"],"names":["Timer","className","React","StopWatch","style","seperatorChar","showSeconds","showMinutes","showHours","showDays","daysText","hoursText","minutesText","secondsText","pluralSymbol","onEachSecond","onFinish","end","useState","second","setSecond","minute","setMinute","hour","setHour","day","setDay","finished","setFinished","holderRef","useRef","timeout","useLayoutEffect","endTime","moment","interval","setInterval","now","Date","isBefore","clearInterval","state","isPlural","status","dayInfo","hourInfo","minuteInfo","secondInfo","text","ref"],"mappings":"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"}